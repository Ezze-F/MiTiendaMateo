{% extends "a_productos/base.html" %}
{% load static %}

{% block title %}Productos{% endblock %}

{% block extra_head %}
    {{ block.super }}
    <!-- DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/dataTables.bootstrap5.min.css">
    <!-- jQuery y DataTables JS -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/dataTables.bootstrap5.min.js"></script>
    <!-- Script de configuración -->
    <script src="{% static 'a_productos/js/datatables.js' %}"></script>
{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2 class="mb-4">Listado de Productos</h2>

    <!-- Tabs -->
    <ul class="nav nav-tabs" id="productosTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <a class="nav-link active" id="disponibles-tab" data-bs-toggle="tab" href="#disponibles" role="tab">Disponibles</a>
        </li>
        <li class="nav-item" role="presentation">
            <a class="nav-link" id="eliminados-tab" data-bs-toggle="tab" href="#eliminados" role="tab">Eliminados</a>
        </li>
        <li class="nav-item" role="presentation">
            <a class="nav-link" id="totales-tab" data-bs-toggle="tab" href="#totales" role="tab">Totales</a>
        </li>
    </ul>

    <div class="tab-content mt-3">
        <!-- Disponibles -->
        <div class="tab-pane fade show active" id="disponibles" role="tabpanel">
            <table id="tablaDisponibles" class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nombre</th>
                        <th>Precio Unitario</th>
                        <th>Fecha Elaboración</th>
                        <th>Fecha Vencimiento</th>
                        <th>Stock</th>
                    </tr>
                </thead>
                <tbody>
                    {% for p in listado_disponibles %}
                    <tr>
                        <td>{{ p.id_productos }}</td>
                        <td>{{ p.nombre_producto }}</td>
                        <td>${{ p.precio_unitario }}</td>
                        <td>{{ p.fecha_elaboracion }}</td>
                        <td>{{ p.fecha_vencimiento }}</td>
                        <td>{{ p.cant_stock }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Eliminados -->
        <div class="tab-pane fade" id="eliminados" role="tabpanel">
            <table id="tablaEliminados" class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nombre</th>
                        <th>Precio Unitario</th>
                        <th>Fecha Elaboración</th>
                        <th>Fecha Vencimiento</th>
                        <th>Stock</th>
                    </tr>
                </thead>
                <tbody>
                    {% for p in listado_eliminados %}
                    <tr>
                        <td>{{ p.id_productos }}</td>
                        <td>{{ p.nombre_producto }}</td>
                        <td>${{ p.precio_unitario }}</td>
                        <td>{{ p.fecha_elaboracion }}</td>
                        <td>{{ p.fecha_vencimiento }}</td>
                        <td>{{ p.cant_stock }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Totales -->
        <div class="tab-pane fade" id="totales" role="tabpanel">
            <table id="tablaTotales" class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nombre</th>
                        <th>Precio Unitario</th>
                        <th>Fecha Elaboración</th>
                        <th>Fecha Vencimiento</th>
                        <th>Stock</th>
                        <th>Borrado Lógico</th>
                    </tr>
                </thead>
                <tbody>
                    {% for p in productos_totales %}
                    <tr>
                        <td>{{ p.id_productos }}</td>
                        <td>{{ p.nombre_producto }}</td>
                        <td>${{ p.precio_unitario }}</td>
                        <td>{{ p.fecha_elaboracion }}</td>
                        <td>{{ p.fecha_vencimiento }}</td>
                        <td>{{ p.cant_stock }}</td>
                        <td>{{ p.borrado_logico }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}